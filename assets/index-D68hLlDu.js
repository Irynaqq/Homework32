(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const w="95bbd2d6",S="https://www.omdbapi.com/",l=document.querySelector("#searchInput"),m=document.querySelector("#typeFilter"),a=document.querySelector("#results"),i=document.querySelector("#loadMore");let d=null,v="",g="",c=1,f=0;function T(e,r=400){let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>e(...n),r)}}function y(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function E(e,r=40){return e.length>r?e.slice(0,r-1)+"…":e}async function L(e,r,s=1){if(!e||e.trim().length<2)return{Search:[],Response:"False"};d&&d.abort(),d=new AbortController;const n=new URLSearchParams({apikey:w,s:e.trim(),type:r||"",page:String(s)}),t=await fetch(`${S}?${n.toString()}`,{signal:d.signal});if(!t.ok)throw new Error(t.status);return t.json()}function p(e="No results"){a.innerHTML=`<div class="state">${e}</div>`}function P(){a.innerHTML='<div class="state loading">Loading<span class="dots"></span></div>'}function N(){a.innerHTML='<div class="state">Error occurred</div>'}function b(e,{append:r=!1}={}){if(!e||!e.length){r||p("No results");return}const s=`
    <div class="movies-grid">
      ${e.map(n=>`
          <article class="card">
            <img class="poster" src="${n.Poster&&n.Poster!=="N/A"?n.Poster:"https://dummyimage.com/600x900/111a33/ffffff&text=No+Poster"}" alt="${n.Title}" />
            <div class="caption">
              <div class="cap-title">${E(y(n.Title),28)}</div>
              <div class="cap-year">${n.Year||""}</div>
            </div>
          </article>
        `).join("")}
    </div>
  `;r&&a.firstElementChild?.classList.contains("movies-grid")?a.firstElementChild.insertAdjacentHTML("beforeend",s.match(/<div class="movies-grid">([\s\S]*)<\/div>/)[1]):a.innerHTML=s}const h=T(async()=>{l.value=y(l.value);const e=l.value.trim(),r=m.value;if(e.length<2){p("Type at least 2 characters…"),i.hidden=!0;return}try{P(),c=1,v=e,g=r;const s=await L(e,r,c);s.Response==="True"?(f=Number(s.totalResults||0),b(s.Search),i.hidden=c*10>=f):(p("No results"),i.hidden=!0)}catch(s){s.name!=="AbortError"&&N(),i.hidden=!0}},400);l.addEventListener("input",h);m.addEventListener("change",h);i.addEventListener("click",async()=>{try{i.disabled=!0,i.textContent="Loading…",c++;const e=await L(v,g,c);e.Response==="True"&&b(e.Search,{append:!0}),i.hidden=c*10>=f}finally{i.disabled=!1,i.textContent="Load more"}});l.value="Supernatural";h();
